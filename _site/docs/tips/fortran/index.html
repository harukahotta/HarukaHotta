<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="https://harukahotta.github.io/HarukaHotta/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://harukahotta.github.io/HarukaHotta/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="https://harukahotta.github.io/HarukaHotta/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://harukahotta.github.io/HarukaHotta/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Fortran | Haruka Hotta</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Fortran" /><meta property="og:locale" content="en_US" /><meta name="description" content="Climate Researcher" /><meta property="og:description" content="Climate Researcher" /><link rel="canonical" href="https://harukahotta.github.io/HarukaHotta/docs/tips/fortran/" /><meta property="og:url" content="https://harukahotta.github.io/HarukaHotta/docs/tips/fortran/" /><meta property="og:site_name" content="Haruka Hotta" /> <script type="application/ld+json"> {"url":"https://harukahotta.github.io/HarukaHotta/docs/tips/fortran/","description":"Climate Researcher","@type":"WebPage","headline":"Fortran","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="https://harukahotta.github.io/HarukaHotta/" class="site-title lh-tight"> Haruka Hotta </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="https://harukahotta.github.io/HarukaHotta/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="https://harukahotta.github.io/HarukaHotta/docs/cv/" class="nav-list-link">CV</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://harukahotta.github.io/HarukaHotta/docs/tools" class="nav-list-link">Tools</a><ul class="nav-list "><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tools/miroc/" class="nav-list-link">MIROC</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tools/nicam/" class="nav-list-link">NICAM</a></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://harukahotta.github.io/HarukaHotta/docs/tips" class="nav-list-link">Tips</a><ul class="nav-list "><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/command/" class="nav-list-link">Command</a><li class="nav-list-item active"><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/fortran/" class="nav-list-link active">Fortran</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/GitHub/" class="nav-list-link">GitHub</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/python/" class="nav-list-link">Python</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/vim/" class="nav-list-link">Vim</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/tips/vscode/" class="nav-list-link">VS Code</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://harukahotta.github.io/HarukaHotta/docs/Media" class="nav-list-link">Memo</a><ul class="nav-list "><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Memo/geoengineer/" class="nav-list-link">Geoengineer</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Memo/video/" class="nav-list-link">ドラマ・ドキュメンタリー・映画など</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Memo/book/" class="nav-list-link">読んだ本</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://harukahotta.github.io/HarukaHotta/docs/Blog" class="nav-list-link">Blog</a><ul class="nav-list "><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Blog/202009/" class="nav-list-link">2020.09.</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Blog/202010/" class="nav-list-link">2020.10.</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Blog/202011/" class="nav-list-link">2020.11.</a><li class="nav-list-item "><a href="https://harukahotta.github.io/HarukaHotta/docs/Blog/202012/" class="nav-list-link">2020.12.</a></ul><li class="nav-list-item"><a href="https://harukahotta.github.io/HarukaHotta/docs/index-test/" class="nav-list-link">Link</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Haruka Hotta" aria-label="Search Haruka Hotta" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//157.82.240.167" class="site-button" > Go to Lab HP </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://harukahotta.github.io/HarukaHotta/docs/tips">Tips</a><li class="breadcrumb-nav-list-item"><span>Fortran</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 class="no_toc" id="fortran"> <a href="#fortran" aria-labelledby="fortran" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fortran</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" aria-labelledby="table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#bug-fix" id="markdown-toc-bug-fix">Bug fix</a><ol><li><a href="#compile-option" id="markdown-toc-compile-option">compile option</a><li><a href="#size" id="markdown-toc-size">size</a></ol><li><a href="#io" id="markdown-toc-io">IO</a><ol><li><a href="#read-file" id="markdown-toc-read-file">read file</a></ol><li><a href="#character" id="markdown-toc-character">character</a><ol><li><a href="#character-length" id="markdown-toc-character-length">character length</a></ol><li><a href="#function-and-subroutine" id="markdown-toc-function-and-subroutine">function and subroutine</a></ol><hr /><p>I don’t like Fortran 77<br /> Basically use gfortran</p><h2 id="bug-fix"> <a href="#bug-fix" aria-labelledby="bug-fix" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bug fix</h2><h3 id="compile-option"> <a href="#compile-option" aria-labelledby="compile-option" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> compile option</h3><p><code class="language-plaintext highlighter-rouge">gfortran -Wall -fbounds-check -O -Wuninitialized -ffpe-trap=invalid,zero,overflow -fbacktrace hoge.f90</code></p><p><code class="language-plaintext highlighter-rouge">-fbounds-check</code> Enable generation of <strong>run-time checks for array subscripts</strong> and against the declared minimum and maximum values. It also checks array indices for assumed and deferred shape arrays against the actual allocated bounds and ensures that all string lengths are equal for character array constructors without an explicit typespec. <br /> <code class="language-plaintext highlighter-rouge">-Wall</code> Enables <strong>commonly used warning options</strong> pertaining to usage that we recommend avoiding and that we believe are easy to avoid.<br /> <code class="language-plaintext highlighter-rouge">-Wuninitialized</code> Warn if an automatic variable is used without first being initialized.<br /> <code class="language-plaintext highlighter-rouge">-ffpe-trap=invalid,zero,overflow</code> <code class="language-plaintext highlighter-rouge">invalid</code> invalid floating point operation. <code class="language-plaintext highlighter-rouge">zero</code> division by zero, <code class="language-plaintext highlighter-rouge">overflow</code> overflow in a floating point operation.<br /> <code class="language-plaintext highlighter-rouge">-fbacktrace</code> When a runtime error is encountered or a deadly signal is emitted (segmentation fault, illegal instruction, bus error or floating-point exception), the Fortran runtime library should <strong>output a backtrace of the error</strong>. This option only has influence for compilation of the Fortran main program.<br /> <code class="language-plaintext highlighter-rouge">-g</code></p><h3 id="size"> <a href="#size" aria-labelledby="size" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> size</h3><p><code class="language-plaintext highlighter-rouge">ulimit -s</code><br /> <code class="language-plaintext highlighter-rouge">ulimit -s unlimited</code></p><p><code class="language-plaintext highlighter-rouge">gfororan -mcmodel=large hoge.f90</code></p><h2 id="io"> <a href="#io" aria-labelledby="io" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IO</h2><h3 id="read-file"> <a href="#read-file" aria-labelledby="read-file" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> read file</h3><div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">ios</span><span class="w">
</span><span class="k">open</span><span class="p">(</span><span class="err">...</span><span class="p">,</span><span class="w"> </span><span class="n">iostat</span><span class="o">=</span><span class="n">ios</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">)</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ios</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
     </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s1">'Failed to open file for output'</span><span class="w">
   </span><span class="k">stop</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ios</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
     </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s1">'End of file'</span><span class="w">
   </span><span class="k">stop</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
</span></code></pre></div></div><h2 id="character"> <a href="#character" aria-labelledby="character" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> character</h2><h3 id="character-length"> <a href="#character-length" aria-labelledby="character-length" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> character length</h3><p><code class="language-plaintext highlighter-rouge">character(len=*), parameter :: text = 'initialization by this string'</code></p><h2 id="function-and-subroutine"> <a href="#function-and-subroutine" aria-labelledby="function-and-subroutine" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> function and subroutine</h2><p>Variables defined in function/subroutine is independent from other function/subroutine and main program.</p><div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">sample</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="c1">!main program</span><span class="w">
  </span><span class="k">stop</span><span class="w">
</span><span class="k">contains</span><span class="w">

</span><span class="kt">real</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">plus1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">real</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">x</span><span class="w">

  </span><span class="n">plus1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1.0</span><span class="w">

  </span><span class="k">return</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">plus1</span><span class="w">

</span><span class="k">subroutine</span><span class="w"> </span><span class="n">hello</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">name</span><span class="w">

  </span><span class="k">write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s1">'Hello '</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w">

  </span><span class="k">return</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">hello</span><span class="w">

</span><span class="k">subroutine</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">real</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w">  </span><span class="p">::</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w">
  </span><span class="kt">real</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">out</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">c</span><span class="w">

  </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">add</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">sample</span><span class="w">
</span></code></pre></div></div><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/pmarsceill/just-the-docs/tree/master/LICENSE.txt">MIT license.</a></p><div class="d-flex mt-2"></div></footer></div></div><div class="search-overlay"></div></div>
